{% extends 'layout1.html' %}
{% block content %}
<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <div>
          <button type="button" class="btn btn-danger remove-item-btn" data-bs-toggle="modal" id="create-btn"
            data-bs-target="#showModal">
            <i class="ri-add-line align-bottom me-1"></i> Add 
          </button>
        </div>
        <!-- <h4 class="card-title mb-0">Exercise List</h4> -->
      </div>
      <!-- end card header -->

      <div class="card-body">
        <div id="customerList">
          <div class="row g-4 mb-3">
            <div class="col-sm">
              
                <div class="d-flex justify-content-sm-start">
                    <div class="search-box ms-2">
                        <input type="text" class="form-control search" placeholder="Search...">
                        <i class="ri-search-line search-icon"></i>
                    </div>
                </div>
            </div>
      
      

            <div class="table-responsive table-card mt-3 mb-1">
              <table class="table align-middle table-nowrap" id="customerTable">
                <thead class="table-light">
                  <tr>
                    <th>
                        Exercise ID
                    </th>
                    <th>Profile Pic</th>
                    <th>Username</th>
                    <th>title</th>
                    <th>Tags</th>
                    <th>Transcript</th>
                    <th>Transcript Audio</th>
                    <th>Likes</th>
                    <th>Audio File</th>
                    <th>User Anonymous</th>
                    <th>Action</th>  
                  </tr>
                </thead>
                {% for mind in admin_listen_exercises %}


                <tbody class="list form-check-all">
                  <tr>
                    <td>{{mind.id}}</td>
                    <td>
                      <div class="avatar-group-item me-3">
                      
                        <a class="image-popup" href="{{common_path}}{{url_for('static',filename='profile_pic/' + mind.user.image_name)}}" title="">
                          <img width="100px"
                               src="{{common_path}}{{url_for('static',filename='profile_pic/'+ mind.user.image_name)}}" alt=""
                               class="rounded-circle avatar-xxs">
                        </a>
                      </div>
                       
               
                      </td>
                    <td class="customer_name">{{mind.user.username}}</td>
                    <td class="customer_name">{{mind.title}}</td>
                    <td class="customer_name">{{mind.tags}}</td>
                    <td class="customer_name">{{mind.transcript}}</td>
                   
                    <td>
                       <audio controls>
                      <source src="{{mind.trans_audio}}">
                      <source src="{{common_path}}{{url_for('static',filename='/audio/'+mind.trans_audio)}}">
                      Your browser does not support the audio element.
                    </audio></td>
                    <td class="customer_name">{{mind.likes}}</td>
                    <td class="customer_name">{{mind.audio_file}}</td>
                    {% if mind.is_anonymous %}
                    <td class="customer_name">True</td>
                    {% else %}
                    <td class="customer_name">False</td>
                    {% endif %}
                     
                  

                    <td>
                      <div class="d-flex gap-2">
                        <!-- <div class="edit">
                        <button class="btn btn-sm btn-success edit-item-btn" data-bs-toggle="modal"
                            data-bs-target="#editModal{{mind.id}}">
                            Edit
                          </button>
                        </div> -->
                        <div class="remove">
                          <button class="btn btn-sm btn-danger remove-item-btn" data-bs-toggle="modal"
                            data-bs-target="#deleteModal{{mind.id}}">
                            Remove
                          </button>
                          
                        </div>
                      </div>
                    </td>
                  </tr>

                  <div class="modal fade" id="deleteModal{{mind.id}}" tabindex="-1"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                            id="btn-close"></button>
                        </div>
                        <form method="POST" action="{{url_for('admin_create.delete_listen_category',mind_id=mind.id)}}">

                          <div class="modal-body">
                            <div class="mt-2 text-center">
                              <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
                                colors="primary:#f7b84b,secondary:#f06548"
                                style="width: 100px; height: 100px"></lord-icon>
                              <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
                                <h4>Are you Sure ?</h4>
                                <p class="text-muted mx-4 mb-0">
                                  Are you Sure You want to Remove this Category ?
                                </p>
                              </div>
                            </div>
                            <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                              <button type="button" class="btn w-sm btn-light" data-bs-dismiss="modal">
                                Close
                              </button>
                              <button type="submit" class="btn w-sm btn-danger" id="delete-record">
                                Yes, Delete It!
                              </button>
                            </div>
                          </div>
                      </div>
                      </form>
                    </div>
                  </div>
                  {# <div class="modal fade" id="editModal{{mind.id}}" tabindex="-1"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header bg-light p-3">
                          <h5 class="modal-title" id="exampleModalLabel"></h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                            id="close-modal"></button>
                        </div>
                        <form method="POST" action="{{url_for('admin_create.edit_category',mind_id=mind.id)}}">
                          <div class="modal-body">

                            <div class="mb-3">
                              <label for="customername-field" class="form-label1">Category Name</label>
                              <input type="text" name="title" id="customername-field" value="{{mind.title}}"
                                class="form-control" placeholder="Enter Category Name" required />
                            </div>



                            <div class="modal-footer">
                              <div class="hstack gap-2 justify-content-end">
                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                                  Close
                                </button>
                                <button type="submit" class="btn btn-success" id="add-btn">
                                  Update Category
                                </button>
                              </div>
                            </div>
                        </form>
                      </div>
                    </div>
                  </div> #}

                  {% endfor %}
                </tbody>
              </table>

              <div class="noresult" style="display: none">
                <div class="text-center">
                    <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop"
                               colors="primary:#121331,secondary:#08a88a"
                               style="width:75px;height:75px"></lord-icon>
                    <h5 class="mt-2">Sorry! No Result Found</h5>
                </div>
            </div>
      
            <div class="d-flex justify-content-end">
              <div class="pagination-wrap hstack gap-2">
                  <a class="page-item pagination-prev disabled" href="#">
                      Previous
                  </a>
                  <ul class="pagination listjs-pagination mb-0"></ul>
                  <a class="page-item pagination-next" href="#">
                      Next
                  </a>
              </div>
            </div>
          


              <div class="modal fade" id="showModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header bg-light p-3">
                      <h5 class="modal-title" id="exampleModalLabel"></h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        id="close-modal"></button>
                    </div>
                    <form method="POST" enctype="multipart/form-data" action="{{url_for('user_create.add_reflect_exercise',mind_id=mind_id)}}">
                      <div class="modal-body">
                      

                        <div class="mb-3">
                            <label for="customername-field" class="form-label1">Title</label>
                            <input type="text" name="title" id="customername-field" class="form-control"
                              placeholder="Enter Description" required />
                          </div>

                        
                    <div class="pcoded-content">
                      <div class="pcoded-inner-content">
                        <div class="main-body">
                          <form class="card-block">

                            <table class="table table-bordered" id="dynamicAddRemove">
                              <tr>
                                <td>
                                  <input type="text" name="tags" placeholder="Enter tag" class="form-control" />
                                </td>
                                <td>
                                  <button type="button" name="tags" id="dynamic-ar" class="btn btn-outline-primary">Add
                                    Tags</button>
                                </td>
                              </tr>
                            </table>
                          </form>
                        </div>
                      </div>
                    </div>


                    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                    <script
                      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
  
                    <script type="text/javascript">
                      var i = 0;
                      $("#dynamic-ar").click(function () {
                        ++i;
                        $("#dynamicAddRemove").append('<tr><td><input type="text" name="tags' + i + '" placeholder="Enter subject" class="form-control" /></td><td><button type="button" class="btn btn-outline-danger remove-input-field">Delete</button></td></tr>');
                      });
  
                      $(document).on('click', '.remove-input-field', function () {
                        console.log('hellooooooooooooo')
                        $(this).parents('tr').remove();
                      });
                    </script>
  

                          <div class="mb-3">
                            <label for="customername-field" class="form-label1">Transcript</label>
                            <input type="text" name="transcript" id="customername-field" class="form-control"
                              placeholder="Enter Category Name" required />
                          </div> 

                      

                          <!-- <div class="mb-3">
                            <label for="customername-field" class="form-label1">Likes</label>
                            <input type="text" name="likes" id="customername-field" class="form-control"
                              placeholder="Enter Category Name" required />
                          </div> -->

                          <div class="mb-3">
                            <label for="customername-field" class="form-label1">Audio File</label>
                            <input type="file" name="audio" id="customername-field" class="form-control"
                              placeholder="Enter audio file" required />
                          </div>


                          <div class="mb-3">
                            <label for="customername-field" class="form-label1">Is User remain Anonymous.?</label>
                            <select class="form-select mb-3" name="is_any_injured" aria-label="Default select example"
                                required>
                                <option disabled selected value="">Select option</option>
                                <option {% if  mind_listen_exercises.is_anonymous == True %} selected {% endif %} value="1">Yes</option>
                                <option {% if  mind_listen_exercises.is_anonymous == False %} selected {% endif %} value="0">No</option>
                            </select>
                        </div>
    

                         <div class="modal-footer">
                          <div class="hstack gap-2 justify-content-end">
                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                              Close
                            </button>
                            <button type="submit" class="btn btn-success" id="add-btn">
                              Add Exercise
                            </button>
                          </div>
                        </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
         </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  
  {% block javascript %}
  <script src="https://cdn.lordicon.com/ritcuqlt.js"></script>
  <script src="{{common_path}}{{url_for('static',filename='assets/libs/prismjs/prism.js')}}"></script>
  <script src="{{common_path}}{{url_for('static',filename='assets/libs/list.js/list.min.js')}}"></script>
  <script src="{{common_path}}{{url_for('static',filename='assets/libs/list.pagination.js/list.pagination.min.js')}}"></script>
  <script src="{{common_path}}{{url_for('static',filename='assets/js/pages/listjs.init.js')}}"></script>
  <script src="{{common_path}}{{url_for('static',filename='assets/libs/sweetalert2/sweetalert2.min.js')}}"></script>
  
{% endblock javascript %}
  {% endblock %}